<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebLLM Test</title>
</head>

<body>
    <h1>WebLLM Test</h1>
    <div id="status">Test baÅŸlatÄ±lÄ±yor...</div>
    <div id="log"></div>

    <script type="module">
        async function testWebLLM() {
            const statusDiv = document.getElementById('status');
            const logDiv = document.getElementById('log');

            function log(message) {
                console.log(message);
                logDiv.innerHTML += '<div>' + message + '</div>';
            }

            try {
                log('ğŸš€ WebLLM test baÅŸlatÄ±lÄ±yor...');

                // Browser desteÄŸi kontrol et
                log('ğŸ” Browser desteÄŸi kontrol ediliyor...');
                log('WebAssembly: ' + (typeof WebAssembly !== 'undefined' ? 'âœ…' : 'âŒ'));
                log('SharedArrayBuffer: ' + (typeof SharedArrayBuffer !== 'undefined' ? 'âœ…' : 'âŒ'));
                log('crossOriginIsolated: ' + (window.crossOriginIsolated ? 'âœ…' : 'âŒ'));

                // WebLLM import et
                log('ğŸ“¦ WebLLM import ediliyor...');
                const { CreateMLCEngine } = await import('@mlc-ai/web-llm');
                log('âœ… WebLLM baÅŸarÄ±yla import edildi');

                // Model yÃ¼kleme dene
                log('â³ Model yÃ¼kleme test ediliyor...');
                statusDiv.textContent = 'Model yÃ¼kleniyor...';

                const engine = await CreateMLCEngine('Llama-3.2-1B-Instruct-q4f16_1-MLC', {
                    initProgressCallback: (report) => {
                        const progress = report.progress ? `${Math.round(report.progress * 100)}%` : '';
                        log(`ğŸ“¥ [${progress}]: ${report.text}`);
                        statusDiv.textContent = `Model yÃ¼kleniyor... ${progress}`;
                    }
                });

                log('âœ… Model baÅŸarÄ±yla yÃ¼klendi!');
                statusDiv.textContent = 'Model hazÄ±r!';

            } catch (error) {
                log('âŒ Hata: ' + error.message);
                statusDiv.textContent = 'Hata: ' + error.message;
                console.error('DetaylÄ± hata:', error);
            }
        }

        testWebLLM();
    </script>
</body>

</html>